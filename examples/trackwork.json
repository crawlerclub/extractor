{
    "name": "Horse Trackwork Extractor",
    "pattern": "(?i)racing/information/Chinese/Trackwork/TrackworkResult.aspx\\?HorseId=[^&]+",
    "example_url": "https://racing.hkjc.com/racing/information/Chinese/Trackwork/TrackworkResult.aspx?HorseId=HK_2022_H203",
    "schemas": [
        {
            "name": "horse_info",
            "entity_type": "horse",
            "selector": "//table[contains(@class, 'horseProfile')]",
            "type": "nested",
            "fields": [
                {
                    "name": "_id",
                    "from": "url",
                    "pattern": "(?i)HorseId=([^&]+)"
                },
                {
                    "name": "horse_name",
                    "selector": ".//span[contains(@class, 'title_text')]",
                    "type": "text"
                },
                {
                    "name": "origin_age",
                    "selector": ".//tr[td[contains(text(), '出生地')]]/td[last()]",
                    "type": "text"
                },
                {
                    "name": "color_sex",
                    "selector": ".//tr[td[contains(text(), '毛色 / 性別')]]/td[last()]",
                    "type": "text"
                },
                {
                    "name": "import_type",
                    "selector": ".//tr[td[contains(text(), '進口類別')]]/td[last()]",
                    "type": "text"
                },
                {
                    "name": "season_prize",
                    "selector": ".//tr[td[contains(text(), '今季獎金')]]/td[last()]",
                    "type": "text"
                },
                {
                    "name": "total_prize",
                    "selector": ".//tr[td[contains(text(), '總獎金')]]/td[last()]",
                    "type": "text"
                },
                {
                    "name": "race_record",
                    "selector": ".//tr[td[contains(text(), '冠-亞-季-總出賽次數')]]/td[last()]",
                    "type": "text"
                },
                {
                    "name": "recent_races",
                    "selector": ".//tr[td[contains(text(), '最近十個賽馬日')]]/td[last()]",
                    "type": "text"
                },
                {
                    "name": "current_location",
                    "selector": ".//tr[td[contains(text(), '現在位置')]]/td[last()]",
                    "type": "text"
                },
                {
                    "name": "import_date",
                    "selector": ".//tr[td[contains(text(), '進口日期')]]/td[last()]",
                    "type": "text"
                },
                {
                    "name": "trainer",
                    "selector": ".//tr[td[contains(text(), '練馬師')]]/td[last()]/a",
                    "type": "text"
                },
                {
                    "name": "owner",
                    "selector": ".//tr[td[contains(text(), '馬主')]]/td[last()]",
                    "type": "text"
                },
                {
                    "name": "current_rating",
                    "selector": ".//tr[td[contains(text(), '現時評分')]]/td[last()]",
                    "type": "text"
                },
                {
                    "name": "season_start_rating",
                    "selector": ".//tr[td[contains(text(), '季初評分')]]/td[last()]",
                    "type": "text"
                },
                {
                    "name": "last_rating",
                    "selector": ".//tr[td[contains(text(), '最後評分')]]/td[last()]",
                    "type": "text"
                },
                {
                    "name": "sire",
                    "selector": ".//tr[td[contains(text(), '父系')]]/td[last()]",
                    "type": "text"
                },
                {
                    "name": "dam",
                    "selector": ".//tr[td[contains(text(), '母系')]]/td[last()]",
                    "type": "text"
                },
                {
                    "name": "damsire",
                    "selector": ".//tr[td[contains(text(), '外祖父')]]/td[last()]",
                    "type": "text"
                }
            ]
        },
        {
            "name": "trackwork_records",
            "entity_type": "trackwork",
            "selector": "//tbody[@class='f_ffxxm']/tr",
            "type": "list",
            "fields": [
                {
                    "name": "_id",
                    "type": "nested",
                    "fields": [
                        {
                            "name": "_id_2",
                            "from": "element",
                            "selector": "td[1]",
                            "pattern": "([\\d/]+)"
                        },
                        {
                            "name": "_id_1",
                            "from": "url",
                            "pattern": "(?i)HorseId=([^&]+)"
                        }
                    ]
                },
                {
                    "name": "_time",
                    "type": "nested",
                    "fields": [
                        {
                            "name": "_time_1",
                            "from": "element",
                            "selector": "td[1]",
                            "pattern": "\\d{2}/\\d{2}/(\\d{4})"
                        },
                        {
                            "name": "_time_2",
                            "from": "element",
                            "selector": "td[1]",
                            "pattern": "\\d{2}/(\\d{2})/\\d{4}"
                        },
                        {
                            "name": "_time_3",
                            "from": "element",
                            "selector": "td[1]",
                            "pattern": "(\\d{2})/\\d{2}/\\d{4}"
                        }
                    ]
                },
                {
                    "name": "date",
                    "selector": "td[1]",
                    "type": "text"
                },
                {
                    "name": "work_type",
                    "selector": "td[2]",
                    "type": "text"
                },
                {
                    "name": "track_location",
                    "selector": "td[3]",
                    "type": "text"
                },
                {
                    "name": "work_details",
                    "selector": "td[4]",
                    "type": "text"
                },
                {
                    "name": "gear",
                    "selector": "td[5]",
                    "type": "text"
                }
            ]
        }
    ]
}
