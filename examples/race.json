{
    "name": "Race Results Extractor",
    "baseSelector": "//div[@id='innerContent']",
    "fields": [
        {
            "name": "race_info",
            "type": "nested",
            "selector": "//div[contains(@class, 'race_tab')]",
            "fields": [
                {
                    "name": "race_date_and_venue",
                    "selector": "//span[contains(@class, 'f_fs13')]/text()",
                    "type": "text"
                },
                {
                    "name": "race_no",
                    "selector": ".//td[contains(text(), '第') and contains(text(), '場')]/text()",
                    "type": "text"
                },
                {
                    "name": "class_and_distance",
                    "selector": ".//td[contains(text(), '第') and contains(text(), '班')]",
                    "type": "text"
                },
                {
                    "name": "track_condition",
                    "selector": ".//td[contains(text(), '場地狀況')]/following-sibling::td[1]",
                    "type": "text"
                },
                {
                    "name": "track_type",
                    "selector": ".//td[contains(text(), '賽道')]/following-sibling::td[1]",
                    "type": "text"
                },
                {
                    "name": "prize",
                    "selector": ".//td[contains(text(), 'HK$')]",
                    "type": "text"
                },
                {
                    "name": "race_times",
                    "selector": ".//td[text()='時間 :']/following-sibling::td",
                    "type": "list",
                    "fields": [
                        {
                            "name": "time",
                            "selector": ".",
                            "type": "text"
                        }
                    ]
                },
                {
                    "name": "section_times",
                    "selector": ".//td[text()='分段時間 :']/following-sibling::td",
                    "type": "list",
                    "fields": [
                        {
                            "name": "time",
                            "selector": ".",
                            "type": "text"
                        }
                    ]
                },
                {
                    "name": "race_type",
                    "selector": ".//td[contains(text(), '賽道')]/preceding-sibling::td[1]",
                    "type": "text"
                }
            ]
        },
        {
            "name": "results",
            "selector": "//div[@class='performance']//table[contains(@class, 'table_bd')]//tbody/tr",
            "type": "list",
            "fields": [
                {
                    "name": "place",
                    "selector": ".//td[count(//td[contains(text(), '名次')]/preceding-sibling::td) + 1]",
                    "type": "text"
                },
                {
                    "name": "horse_no",
                    "selector": ".//td[count(//td[contains(text(), '馬號')]/preceding-sibling::td) + 1]",
                    "type": "text"
                },
                {
                    "name": "horse",
                    "selector": ".//td[count(//td[contains(text(), '馬名')]/preceding-sibling::td) + 1]",
                    "type": "nested",
                    "fields": [
                        {
                            "name": "name",
                            "selector": ".",
                            "type": "text"
                        },
                        {
                            "name": "link",
                            "selector": "./a",
                            "type": "attribute",
                            "attribute": "href"
                        }
                    ]
                },
                {
                    "name": "jockey",
                    "selector": ".//td[count(//td[contains(text(), '騎師')]/preceding-sibling::td) + 1]",
                    "type": "nested",
                    "fields": [
                        {
                            "name": "name",
                            "selector": ".",
                            "type": "text"
                        },
                        {
                            "name": "link",
                            "selector": "./a|.",
                            "type": "attribute",
                            "attribute": "href"
                        }
                    ]
                },
                {
                    "name": "trainer",
                    "selector": ".//td[count(//td[contains(text(), '練馬師')]/preceding-sibling::td) + 1]",
                    "type": "nested",
                    "fields": [
                        {
                            "name": "name",
                            "selector": ".",
                            "type": "text"
                        },
                        {
                            "name": "link",
                            "selector": "./a|.",
                            "type": "attribute",
                            "attribute": "href"
                        }
                    ]
                },
                {
                    "name": "actual_weight",
                    "selector": ".//td[count(//td[contains(text(), '實際')]/preceding-sibling::td) + 1]",
                    "type": "text"
                },
                {
                    "name": "horse_weight",
                    "selector": ".//td[count(//td[contains(text(), '排位')]/preceding-sibling::td) + 1]",
                    "type": "text"
                },
                {
                    "name": "draw",
                    "selector": ".//td[count(//td[contains(text(), '檔位')]/preceding-sibling::td) + 1]",
                    "type": "text"
                },
                {
                    "name": "length_behind",
                    "selector": ".//td[count(//td[contains(text(), '距離')]/preceding-sibling::td) + 1]",
                    "type": "text"
                },
                {
                    "name": "running_position",
                    "selector": ".//td[count(//td[contains(text(), '沿途')]/preceding-sibling::td) + 1]",
                    "type": "text"
                },
                {
                    "name": "finish_time",
                    "selector": ".//td[count(//td[contains(text(), '完成')]/preceding-sibling::td) + 1]",
                    "type": "text"
                },
                {
                    "name": "win_odds",
                    "selector": ".//td[count(//td[contains(text(), '獨贏')]/preceding-sibling::td) + 1]",
                    "type": "text"
                }
            ]
        }
    ]
} 